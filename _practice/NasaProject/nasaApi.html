<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">

    <style>
        .image-div {
            padding: 5px;
            border: 1px solid black;
            border-radius: 2px;
        }

        .content-image {
            margin: 10px 20px;
            color: black !important;
        }
    </style>
    <title>Nasa Api Fetch</title>
</head>

<body>
    <!-- 
Following Tania Ruscia's tutorial on creating your own responsive dropdown navigation bar. https://www.taniarascia.com/responsive-dropdown-navigation-bar/
-->
    <section class="navigation">
        <div class="nav-container">
            <div class="brand">
                <a href="./Home.html" style="font-family: cursive;">Api</a>
            </div>
            <nav>
                <div class="nav-mobile">
                    <a id="nav-toggle" href="#!"><span></span></a>
                </div>
                <ul class="nav-list">
                    <!-- Setting the links to #! will ensure that no action takes place on click. -->
                    <li><a href="./Home.html">Home</a></li>
                    <li><a href="./nasaApi.html">Image</a></li>
                    <li><a href="#!">Services</a>
                        <ul class="nav-dropdown">
                            <li><a href="#!">Web Design</a></li>
                            <li><a href="#!">Web Development</a></li>
                            <li><a href="#!">Graphic Design</a></li>
                        </ul>
                    </li>
                    <li><a href="#!">Pricing</a></li>
                    <li><a href="./contact.html">Contact</a></li>
                </ul>
            </nav>
        </div>
    </section>







    <!-- Image From Api Part -->
    <div id="parent" class="shadow justify-content-evenly align-item-center">
        <!-- Images will be appended here -->
    </div>






    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        // let parent = document.getElementById('parent');

        // async function fetchNasaData() {
        //     try {
        //         // Fetch the data from NASA API
        //         let response = await fetch('https://api.nasa.gov/mars-photos/api/v1/rovers/curiosity/photos?sol=1000&api_key=pxoCBI7McpChluoy7LfxKKDMMDqK8Esi34YDD2Kw');

        //         // Parse the JSON response
        //         let data = await response.json();

        //         // Extract the array of photos
        //         const arrOfObj = data.photos;
        //         console.log(arrOfObj);


        //         if (!arrOfObj) {
        //             let loaderDiv = document.createElement('div')
        //             loaderDiv.innerHTML = ` 
        //             <div class="body">
        //                 <div id="loader" class="loader"></div>
        //             </div>`
        //             parent.appendChild(loaderDiv)
        //         }

        //         else {
        //             parent.innerHTML = "";
        //             // Loop through each photo object and create image elements
        //             arrOfObj.forEach((info) => {
        //                 // Create a new div and img element
        //                 let imageDiv = document.createElement('div');
        //                 imageDiv.classList.add('image-div')


        //                 let contentDiv = document.createElement('div');
        //                 contentDiv.classList.add('content-image')
        //                 contentDiv.innerHTML = `
        //                 <h6>Camera Name: ${info.camera.name} </h6>
        //                 <h6>( ${info.camera.full_name} )</h6>
        //                 <h6>Rover Name: ${info.rover.name} </h6>
        //                 <h6>Landing Date: ${info.rover.landing_date} </h6>
        //                 <h6>Status: ${info.rover.status} </h6>
        //              `




        //                 imageDiv.classList.add('image');

        //                 let img = document.createElement('img');
        //                 img.src = info.img_src;
        //                 img.height = 200;
        //                 img.style.aspectRatio = '1.5 / 1';
        //                 img.alt = 'Mars Rover Image';

        //                 // Append img to div, and div to parent
        //                 imageDiv.appendChild(img);
        //                 imageDiv.appendChild(contentDiv)
        //                 parent.appendChild(imageDiv);
        //             });

        //         }
        //     } catch (error) {
        //         console.error('Error fetching data:', error);
        //     }
        // }

        // // Call the function to fetch and display the data
        // fetchNasaData();let parent = document.getElementById('parent');

        async function fetchNasaData() {
            // Show the loader initially
            showLoader();

            try {
                // Fetch the data from NASA API
                let response = await fetch('https://api.nasa.gov/mars-photos/api/v1/rovers/curiosity/photos?sol=1000&api_key=pxoCBI7McpChluoy7LfxKKDMMDqK8Esi34YDD2Kw');
                let data = await response.json();
                const arrOfObj = data.photos;

                // Hide the loader after data fetch
                hideLoader();

                if (arrOfObj.length > 0) {
                    parent.innerHTML = ""; // Clear any existing content

                    // Loop through each photo object and create image elements
                    arrOfObj.forEach((info) => {
                        // Create a new div and img element
                        let imageDiv = document.createElement('div');
                        imageDiv.classList.add('image-div');

                        let contentDiv = document.createElement('div');
                        contentDiv.classList.add('content-image');
                        contentDiv.innerHTML = `
                    <h6>Camera Name: ${info.camera.name} </h6>
                    <h6>( ${info.camera.full_name} )</h6>
                    <h6>Rover Name: ${info.rover.name} </h6>
                    <h6>Landing Date: ${info.rover.landing_date} </h6>
                    <h6>Status: ${info.rover.status} </h6>
                `;

                        let img = document.createElement('img');
                        img.src = info.img_src;
                        img.height = 200;
                        img.style.aspectRatio = '1.5 / 1';
                        img.alt = 'Mars Rover Image';

                        imageDiv.appendChild(img);
                        imageDiv.appendChild(contentDiv);
                        parent.appendChild(imageDiv);
                    });

                } else {
                    parent.innerHTML = "<p>No photos available</p>";
                }

            } catch (error) {
                console.error('Error fetching data:', error);
                hideLoader();
                parent.innerHTML = "<p>Error fetching data. Please try again later.</p>";
            }
        }

        // Function to show the loader
        function showLoader() {
            let loaderDiv = document.createElement('div');
            loaderDiv.id = 'loader';
            loaderDiv.className = 'loader';
            parent.innerHTML = ''; // Clear parent content
            parent.appendChild(loaderDiv);
        }

        // Function to hide the loader
        function hideLoader() {
            let loader = document.getElementById('loader');
            if (loader) {
                loader.remove();
            }
        }

        // Call the function to fetch and display the data
        fetchNasaData();


    </script>
    <script>
        (function ($) {
            // Begin jQuery
            $(function () {
                // DOM ready
                // If a link has a dropdown, add sub menu toggle.
                $("nav ul li a:not(:only-child)").click(function (e) {
                    $(this).siblings(".nav-dropdown").toggle();
                    // Close one dropdown when selecting another
                    $(".nav-dropdown").not($(this).siblings()).hide();
                    e.stopPropagation();
                });
                // Clicking away from dropdown will remove the dropdown class
                $("html").click(function () {
                    $(".nav-dropdown").hide();
                });
                // Toggle open and close nav styles on click
                $("#nav-toggle").click(function () {
                    $("nav ul").slideToggle();
                });
                // Hamburger to X toggle
                $("#nav-toggle").on("click", function () {
                    this.classList.toggle("active");
                });
            }); // end DOM ready
        })(jQuery); // end jQuery

    </script>
</body>

</html>